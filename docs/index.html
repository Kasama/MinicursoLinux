<!DOCTYPE html>
<html>
  <head>
    <title>Minicurso Linux</title>
    <meta charset="utf-8">
    <style>
      @import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
      @import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
      @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

      body { font-family: 'Droid Serif'; color: white; }
      h1, h2, h3 {
					font-family: 'Lato', 'Avenir Next', 'Avenir', 'Trebuchet MS', 'Segoe UI', sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"
        font-weight: normal;
						color: white;
      }
			.remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; background-color: rgba(1, 1, 1, .3); border-radius: 2px; border-width: 4px; }

    </style>
  </head>
  <body>
			<textarea id="source">
class: center, middle
background-image: url(background.png)
background-position: center;
background-repeat: no-repeat;
background-size: contain;

<!-- $theme: gaia -->

Minicurso Linux
===============

Roberto P. Alegro

Semcomp ß

ICMC - USP

---
background-image: url(background.png)
background-position: center;
background-repeat: no-repeat;
background-size: contain;

Linux
=====

O que é Linux?
--------------

Linux é um Kernel Monolítico baseado em UNIX Open Source e Free.

Criado por Linux Trovalds em 1991.

Windows?
--------

Windows é um Sistema Operacional com um kernel proprietário.

---
background-image: url(background.png)
background-position: center;
background-repeat: no-repeat;
background-size: contain;

Linux
=====

Qual o papel de um Kernel?
--------------------------

Um Kernel é o software que faz a interface entre o Sistema Operacional (e programas) e o hardware.

O que é GNU?
------------

GNU é um conjunto de utilidades. Geralmente é pareado com o kernel Linux dando origem ao SO GNU/Linux, muitas vezes chamado só de Linux

---
background-image: url(background.png)
background-position: center;
background-repeat: no-repeat;
background-size: contain;
<!-- ![bg](background.png) -->

Linux
=====

O que são distribuições Linux e diferenças?
-------------------------------------------

Um Sistema Operacional GNU/Linux com adição de packages, configurações e geralmente de um package manager.

---
background-image: url(background.png)
background-position: center;
background-repeat: no-repeat;
background-size: contain;
<!-- ![bg](background.png) -->

Linux
=====

Outros Linux NON-GNU
--------------------

- Android
- Smart TV
- Embedded
- etc

---
background-image: url(background.png)
background-position: center;
background-repeat: no-repeat;
background-size: contain;

Estrutura de diretórios
======================

Sistemas Linux seguem uma estrutura de diretórios básica padrão. Com algumas diferenças dependendo da distribuição.

Hierarquia de diretórios

- `/`

Root - A raiz do sistema

- `/home/usuário`

Home - pasta pessoal do usuário (`~`)

Guarda documentos, fotos, configurações pessoais, etc

- `/root`

Home do usuário `root`

Guarda normalmente configurações específicas para o usuário `root`

---
background-image: url(background.png)
background-position: center;
background-repeat: no-repeat;
background-size: contain;
<!-- ![bg](background.png) -->

Estrutura de diretórios
======================

- `/boot`

Imagem do Kernel e bootloader


- `/bin` e `/sbin`

Executáveis binários.

`cat`, `ls`, `grep`, `firefox`, etc

- `/usr`

Arquivos relacionados a todos os usuários

> `/usr/bin` `/usr/share`

- `/tmp`

Arquivos temporários (Apagados a cada reboot)

---
background-image: url(background.png)
background-position: center;
background-repeat: no-repeat;
background-size: contain;

Estrutura de diretórios
======================

- `/proc`

Arquivos que representam processos e sockets

```sh
# retorna o PID do firefox
pgrep firefox
# abre a pasta correspondente ao processo do firefox
cd /proc/pid
```

- `/etc` e `/usr/etc`

Arquivos de configuração do sistema.

> `/etc/passwd` - informações de usuários

> `/etc/shadow` - informações de senhas

> `/etc/fstab` - informações do sistema de arquivos

---
background-image: url(background.png)
background-position: center;
background-repeat: no-repeat;
background-size: contain;

Estrutura de diretórios
======================

- `/opt`

Arquivos de programas opcionais

- `/srv`

Raramente presente.
Usada para manter um servidor Apache

- `/lib` e `/usr/lib`

Bibliotecas do sistema

- `/dev/`

Representação de devices (mouse, teclado, hd)

> `/dev/null`

> `/dev/urandom`

---
background-image: url(background.png)
background-position: center;
background-repeat: no-repeat;
background-size: contain;
<!-- ![bg](background.png) -->

Estrutura de diretórios
======================

- `/var`

Arquivos variáveis (logs, cache, spool)

- `/media`

Ponto de montagem de dispositivos externos

- `/mnt`

Ponto de montagem de uso livre

Pode ser usado para debug

---
background-image: url(background.png)
background-position: center;
background-repeat: no-repeat;
background-size: contain;
<!-- ![bg](background.png) -->

Bash
====

O shell bash (Bourne Again SHell) é a implementação mais popular de um shell POSIX. Apesar de existirem outros (ksh, zsh, csh, fish, etc).

Trabalho do shell
-----------------
- Prover uma interface entre o usuário e o sistema operacional.

- Interpretar comandos ou combinações de comandos

- Gerenciar um ambiente para execução de programas

Comandos Bash
-------------

- cd

Muda o diretório atual. (Change Directory).

---
background-image: url(background.png)
background-position: center;
background-repeat: no-repeat;
backgorund-size: contain;

Comandos Bash
-------------

- . (aka source)

Executa os comandos contidos num arquivo nesse shell.

- export

Marca variável para ser passada com o ambiente para processos filhos.

--

Variáveis
---------

```sh
VARIAVEL="batata" # Note que não é possível colocar um espaços
echo "$VARIAVEL"
# source e . tem o mesmo significado
. ~/MinicursoLinux/bash/sourceme
echo "$VARIAVEL"
```

---
background-image: url(background.png)
background-position: center;
background-repeat: no-repeat;
backgorund-size: contain;

Variáveis
---------

```sh
cd ~/MinicursoLinux/bash
VARIAVEL="batata"
./ambiente.sh
VARIAVEL="potato" ./ambiente.sh
echo "$VARIAVEL"
export VARIAVEL
./ambiente.sh
```

Visualizar variáveis de ambiente com `env`

#### Prompt do Bash

```sh
echo "'$PS1'"
# `\033[01;35m` é o caracter especial da cor vermelha
# usar `\w` ao invés de `\W` mostra o caminho completo do diretório atual
PS1="\[\033[01;35m\][\u@\h\[\033[01;37m\] \w\[\033[01;35m\]]\$\[\033[00m\] "
```

---
background-image: url(background.png)
background-position: center;
background-repeat: no-repeat;
backgorund-size: contain;

Sinais
------

- `Ctrl+C`

Envia um sinal SIGINT (interrupt -2) para a aplicação rodando em foreground.

O comportamento padrão da aplicação é de cancelar ou interromper a operação atual ao receber esse sinal (muitas vezes isso significa finalizar o programa), mas ele pode ser ignorado ou significar qualquer outro comportamento, dependendo da aplicação.

Outros sinais existem, os mais úteis são SIGTERM (terminate -15) e SIGKILL (kill -9). O programa `kill` pode enviar sinais para outras aplicações rodando.

```sh
pgrep firefox
kill -15 PID
```

```sh
./persistent.sh # rodar em outro terminal
# Tente apertar Ctrl+C
pgrep persistent.sh
kill -2 PID # SIGINT o mesmo que Ctrl+C
kill -15 PID # SIGTERM pede para fechar 'gracefully'
kill -9 PID # SIGKILL mata o processo
```

---
background-image: url(background.png)
background-position: center;
background-repeat: no-repeat;
backgorund-size: contain;

Outros Atalhos
--------------

- `Ctrl+D`

Envia EOF (End Of File ou Fim De Arquivo) para o programa. Caso o programa espere um input, isso pode significar input vazio ou fim de input.

```sh
cat
# Digite algumas coisas e aperte Ctrl+D
```

- `Ctrl+R`

Inicia a busca reversa no histórico de comandos

- `Ctrl+L`

Limpa a tela (da mesma forma que o comando `clear`)

---
background-image: url(background.png)
background-position: center;
background-repeat: no-repeat;
backgorund-size: contain;

Múltiplos processos
-------------------

- `Ctrl+Z`

Pausa o processo que está no foreground

```sh
./loud.sh
# Pressione Ctrl+Z
```

---
background-image: url(background.png)
background-position: center;
background-repeat: no-repeat;
backgorund-size: contain;

Job Control
-----------

O comando `jobs` lista os processos rodando no shell atual, no foreground, background e os pausados.

Para enviar um processo para o background, primeiro deve-se pausá-lo (Ctrl+Z), depois executar `bg`.

Para devolver um processo para o foreground, basta executar `fg`

```sh
jobs # lista os processos
# [1]+  Parado                  ./loud.sh
bg # envia para o background
fg # trás de volta para o foreground
```

O operador & pode ser adicionado no final do comando para executá-lo no background

```sh
./loud.sh &
```

---
background-image: url(background.png)
background-position: center;
background-repeat: no-repeat;
backgorund-size: contain;

Redirecionamento
----------------

O bash também permite redirecionar o output e o input dos comandos executados.

Existem uma entrada e duas saídas padrão para cada programa, são chamados `stdin` (input) `stdout` (output) e `stderr` (erro).

Eles são enumerados 0 - input, 1 - output e 2 - erro.

--

Redirecionar `stdout` para um arquivo com `>` ou `1>`

```sh
echo "Eu não vou aparecer na tela" > echoed.txt
cat echoed.txt
```

Redirecionar `stdout` para o fim de um arquivo `>>` ou `1>>`

```sh
echo "Eu vou para o final do arquivo" >> echoed.txt
cat echoed.txt
```

---
background-image: url(background.png)
background-position: center;
background-repeat: no-repeat;
backgorund-size: contain;

Redirecionamento
----------------

Para redirecionar `stderr` basta adicionar o número dele nos `>`, por exemplo `2>`
```sh
./error.py > echoed.txt
cat echoed.txt
./error.py 2> echoed.txt
```

Para redirecionar o `stdin` é usado `<` ao invés de `>`
```sh
cat < echoed.txt
```

Também é possível encaminhar a saída de um programa para a entrada do próximo. Isso é chamado de piping `|`
```sh
echo "pipes are fun" | sed 's/fun/awesome/'
# Vamos ver sed mais para frente no curso
```

---
background-image: url(background.png)
background-position: center;
background-repeat: no-repeat;
backgorund-size: contain;

Programas úteis
===============

A maioria das distribuições de Linux já vem com uma série de programas úteis que seguem a filosofia UNIX.

"

This is the Unix philosophy:

> Write programs that do one thing and do it well.

> Write programs to work together.

> Write programs to handle text streams, because that is a universal interface.

"

>> -Doug McIlroy

---
background-image: url(background.png)
background-position: center;
background-repeat: no-repeat;
backgorund-size: contain;








			</textarea>
    <script src="https://remarkjs.com/downloads/remark-latest.min.js">
    </script>
    <script>
      var slideshow = remark.create();
    </script>
  </body>
</html>
